# Milestone v1.1: Bugfixes

**Status:** SHIPPED 2026-01-22
**Phases:** 6-8
**Total Plans:** 5

## Overview

Bugfixes and polish for v1 Time Blocks release. Fixed 11 bugs across Notes panel, UI behavior, and AI planning subsystems.

## Phases

### Phase 6: Notes Panel Fixes

**Goal**: All notes panel functionality works correctly with improved UX
**Depends on**: None (first phase of v1.1)
**Plans**: 2 plans

Plans:
- [x] 06-01: Fix duplicate close button, add note auto-selection, WYSIWYG verification, HTML preview
- [x] 06-02: Backend accepts empty content, typography plugin, dual add buttons UX

**Details:**
- NOTE-01: "Add new note" button creates a new note when clicked
- NOTE-02: Notes panel has single close button (remove duplicate X)
- NOTE-03: WYSIWYG editor displays content correctly in edit mode
- NOTE-04: Note preview renders formatted content (not raw HTML)
- NOTE-05: "Add new note" from expanded panel works (no API error)
- NOTE-06: Main screen Notes section has improved UX (dual buttons, expanded edit)

**Key files modified:**
- frontend/src/components/ui/dialog.tsx
- frontend/src/components/notes/NotesExpandedModal.tsx
- frontend/src/components/analysis/NotesList.tsx
- backend/src/Controller/NoteController.php
- frontend/tailwind.config.js

---

### Phase 7: UI Behavior Fixes

**Goal**: UI responds correctly to user actions without refresh
**Depends on**: Phase 6
**Plans**: 1 plan

Plans:
- [x] 07-01: Fix modal dismiss timestamp and cross-slice task updates

**Details:**
- CHKN-01: Check-in modal stays closed until next scheduled interval after manual dismiss
- UIST-01: Marking task as Later/overdue updates list immediately (no refresh needed)

**Key files modified:**
- frontend/src/store/howAreYouSlice.ts
- frontend/src/store/dailyNoteSlice.ts

---

### Phase 8: AI Planning Fixes

**Goal**: AI planning respects constraints and includes all relevant tasks
**Depends on**: Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Add allowOverlap property to Event entity, update AI prompts
- [x] 08-02: Investigate task splitting (verified OK), fix overdue tasks bug

**Details:**
- PLAN-01: AI does not schedule tasks during events without overlap permission
- PLAN-02: AI task splitting behavior works as expected (verified - no fix needed)
- PLAN-03: Scheduled tasks (with date, no time) appear in daily planning

**Key files modified:**
- backend/src/Entity/Event.php
- backend/src/Service/PlanningScheduleGenerator.php
- backend/templates/prompts/schedule_optimization_en.twig
- backend/templates/prompts/schedule_optimization_pl.twig
- backend/src/Repository/TaskRepository.php
- backend/src/Controller/PlanningController.php
- backend/src/Controller/RebuildController.php

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| hideCloseButton prop for DialogContent | Allows dialogs to use custom close buttons | Good |
| Cross-slice extraReducer pattern | Avoids circular imports in Redux | Good |
| Default allowOverlap=false | Conservative - events block tasks unless allowed | Good |
| Use dueDate <= today for planning | Includes overdue tasks in planning | Good |

**Issues Resolved:**
- Notes panel had duplicate close buttons
- New notes not auto-selected after creation
- Note preview showed raw HTML instead of rendered
- Check-in modal reappeared immediately after dismiss
- Task list required page refresh after check-in actions
- AI scheduled tasks during events without permission
- Overdue tasks didn't appear in planning view

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-22*
