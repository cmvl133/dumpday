---
phase: 02-schedule-visualization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/types/index.ts
  - frontend/src/components/schedule/TimeBlockStrip.tsx
autonomous: true

must_haves:
  truths:
    - "TimeBlock type exists matching backend response structure"
    - "TimeBlockStrip renders colored diagonal stripe with block color"
    - "Hovering TimeBlockStrip shows tooltip with name, times, and edit button"
  artifacts:
    - path: "frontend/src/types/index.ts"
      provides: "TimeBlock interface"
      contains: "export interface TimeBlock"
    - path: "frontend/src/components/schedule/TimeBlockStrip.tsx"
      provides: "Single time block strip component with hover tooltip"
      exports: ["TimeBlockStrip"]
  key_links:
    - from: "frontend/src/components/schedule/TimeBlockStrip.tsx"
      to: "frontend/src/types/index.ts"
      via: "import type { TimeBlock }"
      pattern: "import.*TimeBlock.*from.*types"
---

<objective>
Create TimeBlock type definition and TimeBlockStrip component for schedule visualization.

Purpose: Establish the foundation for displaying time blocks on the schedule - the TypeScript type matching the backend response and the visual component for a single block strip with diagonal stripes and hover tooltip.

Output: TimeBlock type in types/index.ts, TimeBlockStrip.tsx component ready for integration.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-schedule-visualization/02-RESEARCH.md

# Key source files to follow patterns from:
@frontend/src/types/index.ts
@frontend/src/components/schedule/TaskBlock.tsx
@frontend/src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TimeBlock type to frontend types</name>
  <files>frontend/src/types/index.ts</files>
  <action>
Add TimeBlock interface matching backend response structure. Add AFTER RecurringTask interface (line ~25). Also update DailyNoteData interface to include timeBlocks array.

TimeBlock interface:
```typescript
export interface TimeBlock {
  id: number;
  name: string;
  color: string;           // Hex color, e.g., "#9d4edd"
  startTime: string;       // "HH:MM" format
  endTime: string;         // "HH:MM" format
  recurrenceType: RecurrenceType;
  recurrenceDays: number[] | null;
  isActive: boolean;
  createdAt: string;
  tags: Tag[];
}
```

Update DailyNoteData interface (around line 152-163) to add:
```typescript
timeBlocks: TimeBlock[];
```
after the `schedule` field.

NOTE: RecurrenceType is already defined at line 3. Tag is already defined at line 7-11. Both can be reused.
  </action>
  <verify>
Run `npx tsc --noEmit` from frontend/ directory - should pass with no errors.
Check types are exported: `grep -n "export interface TimeBlock" frontend/src/types/index.ts`
  </verify>
  <done>
TimeBlock interface exists in types/index.ts with all fields (id, name, color, startTime, endTime, recurrenceType, recurrenceDays, isActive, createdAt, tags). DailyNoteData includes timeBlocks: TimeBlock[].
  </done>
</task>

<task type="auto">
  <name>Task 2: Create TimeBlockStrip component</name>
  <files>frontend/src/components/schedule/TimeBlockStrip.tsx</files>
  <action>
Create TimeBlockStrip component following TaskBlock.tsx pattern (hover tooltip, z-index management).

Key implementation details:
1. Accept props: block (TimeBlock), topPercent, heightPercent, onEdit callback
2. Use useState for showTooltip (hover state)
3. Position: absolute, left side of schedule (left: 56px to clear time labels), width: 20px
4. Z-index: 5 normally, 100 on hover (to show tooltip above events)
5. Diagonal stripe pattern using repeating-linear-gradient with block.color:
   ```
   background: repeating-linear-gradient(
     45deg,
     ${block.color}15,
     ${block.color}15 6px,
     ${block.color}35 6px,
     ${block.color}35 12px
   )
   ```
6. Left border: 3px solid ${block.color} for visual anchor
7. Tooltip appears on hover (left-full ml-2 positioning like TaskBlock uses right-full mr-2)
8. Tooltip shows: block name, start-end times, tags (if any), edit button (Pencil icon)
9. Use lucide-react Pencil icon for edit button
10. Use cn() utility for class merging
11. Import Button from @/components/ui/button for edit button

Follow TaskBlock.tsx tooltip structure exactly for consistency.
  </action>
  <verify>
Run `npx tsc --noEmit` from frontend/ directory - should pass with no errors.
File exists: `ls frontend/src/components/schedule/TimeBlockStrip.tsx`
  </verify>
  <done>
TimeBlockStrip.tsx exists with: diagonal stripe pattern using block.color, hover tooltip with name/times/tags/edit button, proper z-index management (5 normal, 100 hover), absolute positioning for schedule integration.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `cd frontend && npx tsc --noEmit` passes
2. TimeBlock type exported from types/index.ts
3. DailyNoteData includes timeBlocks field
4. TimeBlockStrip component created with correct structure
</verification>

<success_criteria>
- TimeBlock interface matches backend response (id, name, color, startTime, endTime, recurrenceType, recurrenceDays, isActive, createdAt, tags)
- DailyNoteData interface updated with timeBlocks: TimeBlock[]
- TimeBlockStrip component renders diagonal stripes with configurable color
- Hover tooltip follows TaskBlock pattern (same positioning, z-index)
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-schedule-visualization/02-01-SUMMARY.md`
</output>
